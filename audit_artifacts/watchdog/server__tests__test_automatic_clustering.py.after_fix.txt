============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-9.0.2, pluggy-1.6.0 -- /Users/pranay/Projects/photosearch_experiment/.venv/bin/python
cachedir: .pytest_cache
rootdir: /Users/pranay/Projects/photosearch_experiment
plugins: anyio-4.12.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 6 items

server/tests/test_automatic_clustering.py::test_cosine_similarity ðŸ§ª Testing cosine similarity calculation...
âœ… Identical vectors: similarity = 1.0
âœ… Orthogonal vectors: similarity = 0.0
âœ… Similar vectors: similarity = 0.992
âœ… Different vectors: similarity = 0.577
âœ… Cosine similarity calculation tests passed!
PASSED
server/tests/test_automatic_clustering.py::test_face_embedding_retrieval
ðŸ§ª Testing face embedding retrieval...
âœ… Retrieved 5 face embeddings
âœ… All embeddings retrieved correctly
âœ… Face embedding retrieval tests passed!
PASSED
server/tests/test_automatic_clustering.py::test_similar_face_finding
ðŸ§ª Testing similar face finding...
âœ… Found 3 similar faces with similarity >= 0.7
âœ… Found 3 very similar faces with similarity >= 0.85
   Extremely similar faces (>= 0.95): 3
     - Detection face_3b40f5dcddfab764f0ddd1174cd44f40: similarity = 0.999
     - Detection face_491472ea93c11e747d550192a78967f8: similarity = 0.993
     - Detection face_7575ff8b06f8e2d99e95a6beb0127eda: similarity = 0.985
âœ… Found 3 extremely similar faces with similarity >= 0.95
âœ… Similar face finding tests passed!
PASSED
server/tests/test_automatic_clustering.py::test_cluster_quality_analysis
ðŸ§ª Testing cluster quality analysis...
âœ… Cluster quality analysis:
   - Face count: 5
   - Avg confidence: 0.890
   - Avg quality: 0.840
   - Coherence: 0.989
   - Rating: Excellent
âœ… Cluster quality analysis tests passed!
PASSED
server/tests/test_automatic_clustering.py::test_cluster_merging
ðŸ§ª Testing cluster merging...
âœ… Created two clusters with 3 and 2 faces respectively
âœ… Cluster merging successful:
   - Merged 2 faces into cluster with 3 faces
   - Result: 5 faces in merged cluster
   - Source cluster deleted
âœ… Cluster merging tests passed!
PASSED
server/tests/test_automatic_clustering.py::test_quality_rating_calculation
ðŸ§ª Testing quality rating calculation...
âœ… Quality 0.95 + Coherence 0.95 = Excellent
âœ… Quality 0.90 + Coherence 0.90 = Excellent
âœ… Quality 0.85 + Coherence 0.85 = Good
âœ… Quality 0.80 + Coherence 0.80 = Good
âœ… Quality 0.75 + Coherence 0.75 = Fair
âœ… Quality 0.70 + Coherence 0.70 = Fair
âœ… Quality 0.65 + Coherence 0.65 = Poor
âœ… Quality 0.60 + Coherence 0.60 = Poor
âœ… Quality 0.50 + Coherence 0.50 = Low
âœ… Quality 0.40 + Coherence 0.40 = Low
âœ… Quality rating calculation tests passed!
PASSED

============================= slowest 10 durations =============================
0.02s call     server/tests/test_automatic_clustering.py::test_cluster_quality_analysis
0.02s call     server/tests/test_automatic_clustering.py::test_cluster_merging
0.01s call     server/tests/test_automatic_clustering.py::test_similar_face_finding
0.01s call     server/tests/test_automatic_clustering.py::test_face_embedding_retrieval
0.01s call     server/tests/test_automatic_clustering.py::test_quality_rating_calculation
0.01s call     server/tests/test_automatic_clustering.py::test_cosine_similarity
0.00s setup    server/tests/test_automatic_clustering.py::test_cosine_similarity
0.00s teardown server/tests/test_automatic_clustering.py::test_quality_rating_calculation
0.00s teardown server/tests/test_automatic_clustering.py::test_cluster_merging
0.00s teardown server/tests/test_automatic_clustering.py::test_cluster_quality_analysis
============================== 6 passed in 0.14s ===============================
